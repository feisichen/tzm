{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"padding\": \"10px\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"margin\": \"10px 0\"\n  }\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"--选择学期--\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  const _component_el_table = _resolveComponent(\"el-table\");\n\n  const _component_el_col = _resolveComponent(\"el-col\");\n\n  const _component_el_row = _resolveComponent(\"el-row\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_select, {\n    id: \"mySelect\",\n    modelValue: $data.selectTerm,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectTerm = $event),\n    placeholder: \"--选择学期--\",\n    onChange: $options.load\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_option, {\n      label: \"--选择学期--\",\n      value: ''\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.allTerms, item => {\n      return _openBlock(), _createBlock(_component_el_option, {\n        label: item,\n        value: item\n      }, null, 8\n      /* PROPS */\n      , [\"label\", \"value\"]);\n    }), 256\n    /* UNKEYED_FRAGMENT */\n    ))]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\", \"onChange\"])]), _createVNode(_component_el_table, {\n    data: $data.tableData,\n    border: \"\",\n    stripe: \"\",\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"term\",\n      label: \"学期\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"courseId\",\n      label: \"课号\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"courseName\",\n      label: \"课名\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"credit\",\n      label: \"学分\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"teacherId\",\n      label: \"教师号\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"teacherName\",\n      label: \"教师名\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"usualGrade\",\n      label: \"平时成绩\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"finalGrade\",\n      label: \"考试成绩\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"totalGrade\",\n      label: \"综合成绩\",\n      sortable: \"\"\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\"]), _createVNode(_component_el_row, {\n    style: {\n      \"margin\": \"10px 10px 10px\",\n      \"font-size\": \"10px\",\n      \"color\": \"rgb(96, 98, 102)\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 20\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" 总学分：\" + _toDisplayString($data.totalCredit), 1\n      /* TEXT */\n      )]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_col, {\n      span: 4\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" 平均绩点：\" + _toDisplayString($data.gpa), 1\n      /* TEXT */\n      )]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }), _createVNode(_component_el_row, {\n    style: {\n      \"margin\": \"10px 10px 10px\",\n      \"font-size\": \"10px\",\n      \"color\": \"rgb(96, 98, 102)\"\n    }\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" 共 \" + _toDisplayString($data.total) + \" 条 \", 1\n    /* TEXT */\n    )]),\n    _: 1\n    /* STABLE */\n\n  })]);\n}","map":{"version":3,"mappings":"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","names":["style","_createElementBlock","_createElementVNode","_createVNode","_component_el_select","id","$data","$event","placeholder","onChange","$options","_component_el_option","label","value","_Fragment","_renderList","item","_createBlock","_component_el_table","data","border","stripe","_component_el_table_column","prop","sortable","_component_el_row","_component_el_col","span","_toDisplayString"],"sourceRoot":"","sources":["D:\\code\\Java\\class_choose\\vue\\src\\views\\StudentGrade.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px;\">\n    <div style=\"margin: 10px 0;\">\n      <el-select id=\"mySelect\" v-model=\"selectTerm\" placeholder=\"--选择学期--\" @change=\"load\">\n        <el-option label=\"--选择学期--\" :value=\"''\">--选择学期--</el-option>\n        <el-option\n            v-for=\"item in allTerms\"\n            :label=\"item\"\n            :value=\"item\"\n        />\n      </el-select>\n    </div>\n\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%;\">\n      <el-table-column prop=\"term\" label=\"学期\"/>\n      <el-table-column prop=\"courseId\" label=\"课号\"/>\n      <el-table-column prop=\"courseName\" label=\"课名\"/>\n      <el-table-column prop=\"credit\" label=\"学分\"/>\n      <el-table-column prop=\"teacherId\" label=\"教师号\"/>\n      <el-table-column prop=\"teacherName\" label=\"教师名\"/>\n      <el-table-column prop=\"usualGrade\" label=\"平时成绩\" sortable/>\n      <el-table-column prop=\"finalGrade\" label=\"考试成绩\" sortable/>\n      <el-table-column prop=\"totalGrade\" label=\"综合成绩\" sortable/>\n    </el-table>\n    <el-row style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\">\n      <el-col :span=\"20\">\n        总学分：{{ totalCredit }}\n      </el-col>\n      <el-col :span=\"4\">\n        平均绩点：{{ gpa }}\n      </el-col>\n    </el-row>\n    <el-row style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\">\n      共 {{ total }} 条\n    </el-row>\n\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"StudentGrade\",\n  data() {\n    return {\n      tableData: [],\n      selectTerm: \"\",\n      total: 0,\n      gpa: 0,\n      allTerms: [],\n      credit: [],\n      totalCredit: 0\n    }\n  },\n  created() {\n    this.getCredit();\n    this.load();\n    this.getAllTerm();\n  },\n  methods: {\n    load() {\n      request.get(\"/grade/forStudentDisplay\", {\n        params: {\n          // 后台查询所需数据在此做封装\n          studentId: sessionStorage.getItem(\"currentId\"),\n          selectTerm: this.selectTerm\n        }\n      }).then(res => {\n        this.tableData = res.data.list;\n        this.total = res.data.total;\n        console.log(res)\n        for (let i = 0; i < this.tableData.length; i++) {\n          for (let j = 0; j < this.credit.length; j++) {\n            if (this.tableData[i].courseId == this.credit[j].id) {\n              this.tableData[i].credit = this.credit[j].credit;\n            }\n          }\n        }\n        // 获取总学分\n        this.getTotalCredit();\n\n        // 计算平均绩点\n        this.gpa = 0;\n        for (let i = 0; i < this.tableData.length; i++) {\n          this.gpa += this.getSingleGpa(this.tableData[i].totalGrade) * this.tableData[i].credit;\n        }\n        this.gpa = (this.gpa /= this.totalCredit).toFixed(2)\n      })\n    },\n\n    // 获取所有学期\n    getAllTerm() {\n      request.get(\"/classes/allTerm\").then(res => {\n        this.allTerms = res.data\n      })\n    },\n    getCredit() {\n      request.get(\"/course/getCredit\").then(res => {\n        console.log(res);\n        this.credit = res.data;\n      })\n    },\n    getTotalCredit() {\n      this.totalCredit = 0\n      for (let i = 0; i < this.tableData.length; i++) {\n        this.totalCredit += this.tableData[i].credit\n      }\n    },\n    getSingleGpa(t) {\n      if (t >= 90 && t <= 100) {\n        return 4.0\n      } else if (t >= 85 && t <= 89) {\n        return 3.7\n      } else if (t >= 82 && t <= 84) {\n        return 3.3\n      } else if (t >= 78 && t <= 81) {\n        return 3.0\n      } else if (t >= 75 && t <= 77) {\n        return 2.7\n      } else if (t >= 72 && t <= 74) {\n        return 2.3\n      } else if (t >= 68 && t <= 71) {\n        return 2.0\n      } else if (t >= 66 && t <= 67) {\n        return 1.7\n      } else if (t >= 64 && t <= 65) {\n        return 1.5\n      } else if (t >= 60 && t <= 63) {\n        return 1.0\n      } else if (t >= 0 && t <= 59) {\n        return 0\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}