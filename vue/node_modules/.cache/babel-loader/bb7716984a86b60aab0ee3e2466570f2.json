{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: \"StudentCurriculum\",\n\n  data() {\n    return {\n      tableData: [],\n      selectTerm: \"\",\n      total: 0,\n      allTerms: [],\n      tableHidden: true,\n      credit: [],\n      totalCredit: 0\n    };\n  },\n\n  created() {\n    this.getCredit();\n    this.load();\n    this.getAllTerm();\n  },\n\n  methods: {\n    load() {\n      request.get(\"/classes/forStudentDisplay\", {\n        params: {\n          // 后台查询所需数据在此做封装\n          studentId: sessionStorage.getItem(\"currentId\"),\n          selectTerm: this.selectTerm\n        }\n      }).then(res => {\n        this.tableData = res.data.list;\n        this.total = res.data.total;\n\n        for (let i = 0; i < this.tableData.length; i++) {\n          for (let j = 0; j < this.credit.length; j++) {\n            if (this.tableData[i].courseId == this.credit[j].id) {\n              this.tableData[i].credit = this.credit[j].credit;\n            }\n          }\n        }\n\n        if (this.tableHidden === false) {\n          // 先把表清空\n          // childNodes方法返回元素的子节点集合\n          // item(i)方法返回集合中指定索引的节点\n          // console.log(document.getElementById(\"schedule\").childNodes.length) // 8:含标题和七行\n          let myTable = document.getElementById(\"schedule\").childNodes;\n\n          for (let i = 2; i < 8; i++) {\n            // 每一行\n            for (let j = 1; j < 6; j++) {\n              // 每一列\n              myTable.item(i).childNodes.item(j).innerText = \"\";\n            }\n          } // 建表\n\n\n          for (let i = 0; i < this.tableData.length; i++) {\n            document.getElementById(this.tableData[i].time).innerText = String.fromCharCode(i + 1 + 64);\n          } // 获取总学分\n\n\n          this.getTotalCredit();\n        }\n      });\n    },\n\n    // 获取所有学期\n    getAllTerm() {\n      request.get(\"/classes/allTerm\").then(res => {\n        this.allTerms = res.data;\n      });\n    },\n\n    indexMethod(index) {\n      return String.fromCharCode(index + 1 + 64);\n    },\n\n    selectChange(val) {\n      this.load();\n\n      if (val === \"\") {\n        this.tableHidden = true;\n      } else {\n        this.tableHidden = false;\n      }\n    },\n\n    // 此处方法内语句执行顺序总感觉有点问题，原因不明，但效果理想\n    getCredit() {\n      request.get(\"/course/getCredit\").then(res => {\n        console.log(res);\n        this.credit = res.data;\n      });\n    },\n\n    getTotalCredit() {\n      this.totalCredit = 0;\n\n      for (let i = 0; i < this.tableData.length; i++) {\n        this.totalCredit += this.tableData[i].credit;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","tableData","selectTerm","total","allTerms","tableHidden","credit","totalCredit","created","getCredit","load","getAllTerm","methods","get","params","studentId","sessionStorage","getItem","then","res","list","i","length","j","courseId","id","myTable","document","getElementById","childNodes","item","innerText","time","String","fromCharCode","getTotalCredit","indexMethod","index","selectChange","val","console","log"],"sourceRoot":"","sources":["D:\\code\\Java\\class_choose\\vue\\src\\views\\StudentCurriculum.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px;\">\n    <div style=\"margin: 10px 0;\">\n      <el-select v-model=\"selectTerm\" placeholder=\"--选择学期--\" @change=\"selectChange\">\n        <el-option label=\"--选择学期--\" :value=\"''\">--选择学期--</el-option>\n        <el-option\n            v-for=\"item in allTerms\"\n            :label=\"item\"\n            :value=\"item\"\n        />\n      </el-select>\n    </div>\n\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%;\">\n      <el-table-column type=\"index\" :index=\"indexMethod\"/>\n      <el-table-column prop=\"term\" label=\"学期\"/>\n      <el-table-column prop=\"courseId\" label=\"课号\"/>\n      <el-table-column prop=\"courseName\" label=\"课名\"/>\n      <el-table-column prop=\"credit\" label=\"学分\"/>\n      <el-table-column prop=\"teacherId\" label=\"教师号\"/>\n      <el-table-column prop=\"teacherName\" label=\"教师名\"/>\n      <el-table-column prop=\"time\" label=\"时间\"/>\n    </el-table>\n    <div style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\">共 {{ total }} 条</div>\n    <div style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\" v-if=\"tableHidden == false\">\n      总学分：{{ totalCredit }}\n    </div>\n\n    <table :hidden=\"tableHidden\" id=\"schedule\">\n      <caption style=\"margin: 5px;\"><h2>课程表</h2></caption>\n      <tr style=\"background-color: #fafafa\">\n        <td style=\"font-weight: bold; width: 150px;\">时间段</td>\n        <td style=\"font-weight: bold\">周一</td>\n        <td style=\"font-weight: bold\">周二</td>\n        <td style=\"font-weight: bold\">周三</td>\n        <td style=\"font-weight: bold\">周四</td>\n        <td style=\"font-weight: bold\">周五</td>\n      </tr>\n      <tr>\n        <td>1-2&nbsp;&nbsp;&nbsp;8:00-8:45</td>\n        <td id=\"一1-2\"></td>\n        <td id=\"二1-2\"></td>\n        <td id=\"三1-2\"></td>\n        <td id=\"四1-2\"></td>\n        <td id=\"五1-2\"></td>\n      </tr>\n      <tr>\n        <td>3-4&nbsp;&nbsp;&nbsp;10:00-11:40</td>\n        <td id=\"一3-4\"></td>\n        <td id=\"二3-4\"></td>\n        <td id=\"三3-4\"></td>\n        <td id=\"四3-4\"></td>\n        <td id=\"五3-4\"></td>\n      </tr>\n      <tr>\n        <td>5-6&nbsp;&nbsp;&nbsp;13:00-14:40</td>\n        <td id=\"一5-6\"></td>\n        <td id=\"二5-6\"></td>\n        <td id=\"三5-6\"></td>\n        <td id=\"四5-6\"></td>\n        <td id=\"五5-6\"></td>\n      </tr>\n      <tr>\n        <td>7-8&nbsp;&nbsp;&nbsp;15:00-16:40</td>\n        <td id=\"一7-8\"></td>\n        <td id=\"二7-8\"></td>\n        <td id=\"三7-8\"></td>\n        <td id=\"四7-8\"></td>\n        <td id=\"五7-8\"></td>\n      </tr>\n      <tr>\n        <td>9-10&nbsp;&nbsp;&nbsp;18:00-19:40</td>\n        <td id=\"一9-10\"></td>\n        <td id=\"二9-10\"></td>\n        <td id=\"三9-10\"></td>\n        <td id=\"四9-10\"></td>\n        <td id=\"五9-10\"></td>\n      </tr>\n      <tr>\n        <td>11-12&nbsp;&nbsp;&nbsp;20:00-21:40</td>\n        <td id=\"一11-12\"></td>\n        <td id=\"二11-12\"></td>\n        <td id=\"三11-12\"></td>\n        <td id=\"四11-12\"></td>\n        <td id=\"五11-12\"></td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"StudentCurriculum\",\n  data() {\n    return {\n      tableData: [],\n      selectTerm: \"\",\n      total: 0,\n      allTerms: [],\n      tableHidden: true,\n      credit: [],\n      totalCredit: 0\n    }\n  },\n  created() {\n    this.getCredit();\n    this.load();\n    this.getAllTerm();\n  },\n  methods: {\n    load() {\n      request.get(\"/classes/forStudentDisplay\", {\n        params: {\n          // 后台查询所需数据在此做封装\n          studentId: sessionStorage.getItem(\"currentId\"),\n          selectTerm: this.selectTerm\n        }\n      }).then(res => {\n        this.tableData = res.data.list;\n        this.total = res.data.total;\n        for (let i = 0; i < this.tableData.length; i++) {\n          for (let j = 0; j < this.credit.length; j++) {\n            if (this.tableData[i].courseId == this.credit[j].id) {\n              this.tableData[i].credit = this.credit[j].credit;\n            }\n          }\n        }\n        if (this.tableHidden === false) {\n          // 先把表清空\n          // childNodes方法返回元素的子节点集合\n          // item(i)方法返回集合中指定索引的节点\n          // console.log(document.getElementById(\"schedule\").childNodes.length) // 8:含标题和七行\n          let myTable = document.getElementById(\"schedule\").childNodes\n          for (let i = 2; i < 8; i++) { // 每一行\n            for (let j = 1; j < 6; j++) { // 每一列\n              myTable.item(i).childNodes.item(j).innerText = \"\";\n            }\n          }\n          // 建表\n          for (let i = 0; i < this.tableData.length; i++) {\n            document.getElementById(this.tableData[i].time).innerText = String.fromCharCode(i + 1 + 64);\n          }\n          // 获取总学分\n          this.getTotalCredit();\n        }\n      })\n    },\n\n    // 获取所有学期\n    getAllTerm() {\n      request.get(\"/classes/allTerm\").then(res => {\n        this.allTerms = res.data\n      })\n    },\n    indexMethod(index) {\n      return String.fromCharCode(index + 1 + 64)\n    },\n    selectChange(val) {\n      this.load()\n      if (val === \"\") {\n        this.tableHidden = true;\n      } else {\n        this.tableHidden = false;\n      }\n    },\n    // 此处方法内语句执行顺序总感觉有点问题，原因不明，但效果理想\n\n    getCredit() {\n      request.get(\"/course/getCredit\").then(res => {\n        console.log(res);\n        this.credit = res.data;\n      })\n    },\n\n    getTotalCredit() {\n      this.totalCredit = 0\n      for (let i = 0; i < this.tableData.length; i++) {\n        this.totalCredit += this.tableData[i].credit\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\ntable {\n  border: 1px solid #ebeef5;\n  width: 100%;\n  border-collapse: collapse;\n  color: rgb(96, 98, 102);\n}\n\ntd {\n  border: 1px solid #ebeef5;\n  padding: 10px;\n}\n\ntr:hover {\n  background-color: #fafafa;\n}\n</style>"]},"metadata":{},"sourceType":"module"}