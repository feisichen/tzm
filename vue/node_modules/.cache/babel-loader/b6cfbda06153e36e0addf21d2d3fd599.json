{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: \"StudentCurriculum\",\n\n  data() {\n    return {\n      tableData: [],\n      selectTerm: \"\",\n      total: 0,\n      allTerms: [],\n      tableHidden: true,\n      credit: [],\n      totalCredit: 0\n    };\n  },\n\n  created() {\n    this.getCredit();\n    this.load();\n    this.getAllTerm();\n  },\n\n  methods: {\n    load() {\n      request.get(\"/classes/forStudentDisplay\", {\n        params: {\n          // 后台查询所需数据在此做封装\n          studentId: sessionStorage.getItem(\"currentId\"),\n          selectTerm: this.selectTerm\n        }\n      }).then(res => {\n        this.tableData = res.data.list;\n        this.total = res.data.total;\n\n        for (let i = 0; i < this.tableData.length; i++) {\n          for (let j = 0; j < this.credit.length; j++) {\n            if (this.tableData[i].courseId == this.credit[j].id) {\n              this.tableData[i].credit = this.credit[j].credit;\n            }\n          }\n        }\n\n        if (this.tableHidden === false) {\n          // 先把表清空\n          // childNodes方法返回元素的子节点集合\n          // item(i)方法返回集合中指定索引的节点\n          // console.log(document.getElementById(\"schedule\").childNodes.length) // 8:含标题和七行\n          let myTable = document.getElementById(\"schedule\").childNodes;\n\n          for (let i = 2; i < 8; i++) {\n            // 每一行\n            for (let j = 1; j < 6; j++) {\n              // 每一列\n              myTable.item(i).childNodes.item(j).innerText = \"\";\n            }\n          } // 建表\n\n\n          for (let i = 0; i < this.tableData.length; i++) {\n            document.getElementById(this.tableData[i].time).innerText = String.fromCharCode(i + 1 + 64);\n          } // 获取总学分\n\n\n          this.getTotalCredit();\n        }\n      });\n    },\n\n    // 获取所有学期\n    getAllTerm() {\n      request.get(\"/classes/allTerm\").then(res => {\n        this.allTerms = res.data;\n      });\n    },\n\n    indexMethod(index) {\n      return String.fromCharCode(index + 1 + 64);\n    },\n\n    selectChange(val) {\n      this.load();\n\n      if (val === \"\") {\n        this.tableHidden = true;\n      } else {\n        this.tableHidden = false;\n      }\n    },\n\n    // 此处方法内语句执行顺序总感觉有点问题，原因不明，但效果理想\n    getCredit() {\n      request.get(\"/course/getCredit\").then(res => {\n        console.log(res);\n        this.credit = res.data;\n      });\n    },\n\n    getTotalCredit() {\n      this.totalCredit = 0;\n\n      for (let i = 0; i < this.tableData.length; i++) {\n        this.totalCredit += this.tableData[i].credit;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["request","name","data","tableData","selectTerm","total","allTerms","tableHidden","credit","totalCredit","created","getCredit","load","getAllTerm","methods","get","params","studentId","sessionStorage","getItem","then","res","list","i","length","j","courseId","id","myTable","document","getElementById","childNodes","item","innerText","time","String","fromCharCode","getTotalCredit","indexMethod","index","selectChange","val","console","log"],"sourceRoot":"","sources":["C:\\Users\\z1871\\Desktop\\tzm\\vue\\src\\views\\StudentCurriculum.vue"],"sourcesContent":["<template>\r\n  <div style=\"padding: 10px;\">\r\n    <div style=\"margin: 10px 0;\">\r\n      <el-select v-model=\"selectTerm\" placeholder=\"--选择学期--\" @change=\"selectChange\">\r\n        <el-option label=\"--选择学期--\" :value=\"''\">--选择学期--</el-option>\r\n        <el-option\r\n            v-for=\"item in allTerms\"\r\n            :label=\"item\"\r\n            :value=\"item\"\r\n        />\r\n      </el-select>\r\n    </div>\r\n\r\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%;\">\r\n      <el-table-column type=\"index\" :index=\"indexMethod\"/>\r\n      <el-table-column prop=\"term\" label=\"学期\"/>\r\n      <el-table-column prop=\"courseId\" label=\"课号\"/>\r\n      <el-table-column prop=\"courseName\" label=\"课名\"/>\r\n      <el-table-column prop=\"credit\" label=\"学分\"/>\r\n      <el-table-column prop=\"teacherId\" label=\"教师号\"/>\r\n      <el-table-column prop=\"teacherName\" label=\"教师名\"/>\r\n      <el-table-column prop=\"time\" label=\"时间\"/>\r\n    </el-table>\r\n    <div style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\">共 {{ total }} 条</div>\r\n    <div style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\" v-if=\"tableHidden == false\">\r\n      总学分：{{ totalCredit }}\r\n    </div>\r\n\r\n    <table :hidden=\"tableHidden\" id=\"schedule\">\r\n      <caption style=\"margin: 5px;\"><h2>课程表</h2></caption>\r\n      <tr style=\"background-color: #fafafa\">\r\n        <td style=\"font-weight: bold; width: 150px;\">时间段</td>\r\n        <td style=\"font-weight: bold\">周一</td>\r\n        <td style=\"font-weight: bold\">周二</td>\r\n        <td style=\"font-weight: bold\">周三</td>\r\n        <td style=\"font-weight: bold\">周四</td>\r\n        <td style=\"font-weight: bold\">周五</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1-2&nbsp;&nbsp;&nbsp;8:00-8:45</td>\r\n        <td id=\"一1-2\"></td>\r\n        <td id=\"二1-2\"></td>\r\n        <td id=\"三1-2\"></td>\r\n        <td id=\"四1-2\"></td>\r\n        <td id=\"五1-2\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td>3-4&nbsp;&nbsp;&nbsp;10:00-11:40</td>\r\n        <td id=\"一3-4\"></td>\r\n        <td id=\"二3-4\"></td>\r\n        <td id=\"三3-4\"></td>\r\n        <td id=\"四3-4\"></td>\r\n        <td id=\"五3-4\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td>5-6&nbsp;&nbsp;&nbsp;13:00-14:40</td>\r\n        <td id=\"一5-6\"></td>\r\n        <td id=\"二5-6\"></td>\r\n        <td id=\"三5-6\"></td>\r\n        <td id=\"四5-6\"></td>\r\n        <td id=\"五5-6\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td>7-8&nbsp;&nbsp;&nbsp;15:00-16:40</td>\r\n        <td id=\"一7-8\"></td>\r\n        <td id=\"二7-8\"></td>\r\n        <td id=\"三7-8\"></td>\r\n        <td id=\"四7-8\"></td>\r\n        <td id=\"五7-8\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td>9-10&nbsp;&nbsp;&nbsp;18:00-19:40</td>\r\n        <td id=\"一9-10\"></td>\r\n        <td id=\"二9-10\"></td>\r\n        <td id=\"三9-10\"></td>\r\n        <td id=\"四9-10\"></td>\r\n        <td id=\"五9-10\"></td>\r\n      </tr>\r\n      <tr>\r\n        <td>11-12&nbsp;&nbsp;&nbsp;20:00-21:40</td>\r\n        <td id=\"一11-12\"></td>\r\n        <td id=\"二11-12\"></td>\r\n        <td id=\"三11-12\"></td>\r\n        <td id=\"四11-12\"></td>\r\n        <td id=\"五11-12\"></td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"StudentCurriculum\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      selectTerm: \"\",\r\n      total: 0,\r\n      allTerms: [],\r\n      tableHidden: true,\r\n      credit: [],\r\n      totalCredit: 0\r\n    }\r\n  },\r\n  created() {\r\n    this.getCredit();\r\n    this.load();\r\n    this.getAllTerm();\r\n  },\r\n  methods: {\r\n    load() {\r\n      request.get(\"/classes/forStudentDisplay\", {\r\n        params: {\r\n          // 后台查询所需数据在此做封装\r\n          studentId: sessionStorage.getItem(\"currentId\"),\r\n          selectTerm: this.selectTerm\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data.list;\r\n        this.total = res.data.total;\r\n        for (let i = 0; i < this.tableData.length; i++) {\r\n          for (let j = 0; j < this.credit.length; j++) {\r\n            if (this.tableData[i].courseId == this.credit[j].id) {\r\n              this.tableData[i].credit = this.credit[j].credit;\r\n            }\r\n          }\r\n        }\r\n        if (this.tableHidden === false) {\r\n          // 先把表清空\r\n          // childNodes方法返回元素的子节点集合\r\n          // item(i)方法返回集合中指定索引的节点\r\n          // console.log(document.getElementById(\"schedule\").childNodes.length) // 8:含标题和七行\r\n          let myTable = document.getElementById(\"schedule\").childNodes\r\n          for (let i = 2; i < 8; i++) { // 每一行\r\n            for (let j = 1; j < 6; j++) { // 每一列\r\n              myTable.item(i).childNodes.item(j).innerText = \"\";\r\n            }\r\n          }\r\n          // 建表\r\n          for (let i = 0; i < this.tableData.length; i++) {\r\n            document.getElementById(this.tableData[i].time).innerText = String.fromCharCode(i + 1 + 64);\r\n          }\r\n          // 获取总学分\r\n          this.getTotalCredit();\r\n        }\r\n      })\r\n    },\r\n\r\n    // 获取所有学期\r\n    getAllTerm() {\r\n      request.get(\"/classes/allTerm\").then(res => {\r\n        this.allTerms = res.data\r\n      })\r\n    },\r\n    indexMethod(index) {\r\n      return String.fromCharCode(index + 1 + 64)\r\n    },\r\n    selectChange(val) {\r\n      this.load()\r\n      if (val === \"\") {\r\n        this.tableHidden = true;\r\n      } else {\r\n        this.tableHidden = false;\r\n      }\r\n    },\r\n    // 此处方法内语句执行顺序总感觉有点问题，原因不明，但效果理想\r\n\r\n    getCredit() {\r\n      request.get(\"/course/getCredit\").then(res => {\r\n        console.log(res);\r\n        this.credit = res.data;\r\n      })\r\n    },\r\n\r\n    getTotalCredit() {\r\n      this.totalCredit = 0\r\n      for (let i = 0; i < this.tableData.length; i++) {\r\n        this.totalCredit += this.tableData[i].credit\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  border: 1px solid #ebeef5;\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  color: rgb(96, 98, 102);\r\n}\r\n\r\ntd {\r\n  border: 1px solid #ebeef5;\r\n  padding: 10px;\r\n}\r\n\r\ntr:hover {\r\n  background-color: #fafafa;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}